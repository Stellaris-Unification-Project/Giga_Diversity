#Adding the Lifeless Ammonia Terraform modifier to a Habitat

#Toxic, Hothouse Hab. also covers the Hydrocarbon Variant of the Frozen Habitat.
decision_ll_ammonia_terraform_aa = {
	owned_planets_only = yes
	#icon = decision_ecoarcology_project
	prerequisites = { giga_tech_terraform_toxic tech_ammonia_terraform }
	enactment_time = 3780
	resources = {
		category = decisions
		cost = {
			influence = 75
			alloys = 7260
			energy = 3360
		}
	}
	potential = {
		has_global_flag = planetarydiversityexotics
		NOT = { has_global_flag = planetaryterraformimpossible }
		NOT = { has_global_flag = terraform_toxic_disabled }
			#If everything is coded correctly in PD then terraforming_candidate is always replaced with hab_terraforming_candidate. checking for both in case there are any errors in code
		NOR = {
			has_modifier = terraforming_candidate
			has_modifier = hab_terraforming_candidate
			#Commented out exotic. Enable additional checks as needed for extotic checks. For ease of copying code
			#has_modifier = terraforming_ash
			has_modifier = terraforming_ammonia
			#has_modifier = terraforming_sulfur
			#has_modifier = terraforming_methane

		}
		NOT = { has_modifier = lifeless_ammonia_terrafrom }
		OR = {
			is_planet_class = pc_pd_toxic_hab
			is_planet_class = pc_pd_hothouse_hab
			AND = { is_planet_class = pc_pd_frozen_hab has_planet_flag = pdhab_hydrocarbon }
		}
	}
	effect = {
		# Add Terraform Modifier that allows terraform into a lifeless world
		hidden_effect = {
			add_modifier = { modifier = lifeless_ammonia_terrafrom }
		}
	}
	ai_weight = { weight = 5 }
}

# Barren and Barren Cold with all of the variants. Frozen when not Hydrocarbon.
decision_ll_ammonia_terraform_dci = {
	owned_planets_only = yes
	#icon = decision_ecoarcology_project
	prerequisites = { giga_tech_terraform_barren tech_ammonia_terraform }
	enactment_time = 3780
	resources = {
		category = decisions
		cost = {
			influence = 75
			alloys = 7260
			energy = 3360
		}
	}
	potential = {
		has_global_flag = planetarydiversityexotics
		NOT = { has_global_flag = planetaryterraformimpossible }
		NOT = { has_global_flag = terraform_barren_disabled }
			#If everything is coded correctly in PD then terraforming_candidate is always replaced with hab_terraforming_candidate. checking for both in case there are any errors in code
		NOT = {
			has_modifier = terraforming_candidate
			has_modifier = hab_terraforming_candidate
			#Commented out exotic. Enable additional checks as needed for extotic checks. For ease of copying code
			#has_modifier = terraforming_ash
			has_modifier = terraforming_ammonia
			#has_modifier = terraforming_sulfur
			#has_modifier = terraforming_methane

		}
		NOT = { has_modifier = lifeless_ammonia_terrafrom }
		OR = {
			is_planet_class = pc_pd_barren_hab
			is_planet_class = pc_pd_barren_cold_hab
			AND = { is_planet_class = pc_pd_frozen_hab NOT = { has_planet_flag = pdhab_hydrocarbon } }
		}
	}
	effect = {
		# Add Terraform Modifier that allows terraform into a lifeless world
		hidden_effect = {
			#remove_planet_flag = pdhab #TODO add this flag removal to terraforming
			#remove_planet_flag = pdhab_hydrocarbon #TODO add this flag removal to terraforming
			#remove_planet_flag = pd_mining_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_hab_d1 #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_hab_d2 #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_energy_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_science_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_commercial_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_farming_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_foundry_hab #TODO add this flag removal to terraforming
			add_modifier = { modifier = lifeless_ammonia_terrafrom }
			#giga_reroll_lifeless = yes #TODO add this flag removal to terraforming checks
		}
	}
	ai_weight = { weight = 5 }
}

# Molten habs of all types.
decision_ll_ammonia_terraform_gs = {
	owned_planets_only = yes
	#icon = decision_ecoarcology_project
	prerequisites = { giga_tech_terraform_molten tech_ammonia_terraform }
	enactment_time = 3780
	resources = {
		category = decisions
		cost = {
			influence = 75
			alloys = 7260
			energy = 3360
		}
	}
	potential = {
		has_global_flag = planetarydiversityexotics
	#TODO add additional tech requirements
		NOT = { has_global_flag = planetaryterraformimpossible }
		NOT = { has_global_flag = geothermal_disabled }
			#If everything is coded correctly in PD then terraforming_candidate is always replaced with hab_terraforming_candidate. checking for both in case there are any errors in code
		NOR = { 
			has_modifier = terraforming_candidate
			has_modifier = hab_terraforming_candidate
			#Commented out exotic. Enable additional checks as needed for extotic checks. For ease of copying code
			#has_modifier = terraforming_ash
			has_modifier = terraforming_ammonia
			#has_modifier = terraforming_sulfur
			#has_modifier = terraforming_methane

		}
		NOT = { has_modifier = lifeless_ammonia_terrafrom }
		OR = {
			is_planet_class = pc_pd_molten_hab
		}
	}
	effect = {
		# Add Terraform Modifier that allows terraform into a lifeless world
		hidden_effect = {
			#remove_planet_flag = pdhab #TODO add this flag removal to terraforming
			#remove_planet_flag = pdhab_hydrocarbon #TODO add this flag removal to terraforming
			#remove_planet_flag = pd_mining_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_hab_d1 #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_hab_d2 #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_energy_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_science_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_commercial_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_farming_hab #TODO add this flag removal to terraforming 
			#remove_planet_flag = pd_foundry_hab #TODO add this flag removal to terraforming
			add_modifier = { modifier = lifeless_ammonia_terrafrom }
			#giga_reroll_lifeless = yes #TODO add this flag removal to terraforming checks
		}
	}
	ai_weight = { weight = 5 }
}